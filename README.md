Что это?
========

Это комплект раскладок для macOS, основанных на нескольких известных раскладках:

* «[Русская машинопись](https://ru.wikipedia.org/wiki/ЙЦУКЕН#.C2.AB.D0.A0.D1.83.D1.81.D1.81.D0.BA.D0.B0.D1.8F_.28.D0.BC.D0.B0.D1.88.D0.B8.D0.BD.D0.BE.D0.BF.D0.B8.D1.81.D1.8C.29.C2.BB)»

  ![](https://upload.wikimedia.org/wikipedia/commons/0/04/Keyboard_layout_ru%28typewriter%29.svg)
* «[Мефодица](http://www.tema.ru/rrr/soft/)» Лебедева
* «[Типографская раскладка](http://ilyabirman.ru/projects/typography-layout/)» Бирмана
 
  ![](https://ilyabirman.ru/projects/typography-layout/i/layout-mac@2x.png)
* «[Colemak](https://ru.wikipedia.org/wiki/Colemak)»
  ![](https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/KB_US-Colemak.svg/800px-KB_US-Colemak.svg.png)
 

Он нужен для того, чтобы можно было переключать язык по кнопке «Caps Lock» наиболее естевственным способом и использовать все возможности перечисленных раскладок.

Зачем это?
==========

Это делает вашу работу за компьютером приятнее и производительнее. Я написал про это [статью на Geektimes]( https://geektimes.ru/post/175075/).

Коротко говоря: 
* Переключать раскладку по Caps Lock — удобно. 
* В раскладке «Мефодица» оба языка — английский и русский — уместились в одной раскладке и переключаются по «Caps Lock» без использования механизма смены раскладок. Это даже удобнее стандартного переключения по Caps Lock, встроенного в новые версии macOS, потому что показывает статус раскладки светодиодом на клавиатуре. Переключения раскладки в терминах MacOS больше не будет, раскладка останется одна.
* Некоторым при этом хочется иметь стандартную русскую раскладку, некоторым — русскую машинопись, а некоторым — ещё и поменять английскую раскладку на Коулмак
* Все раскладки содержат Бирмановские [типографские знаки](http://ilyabirman.ru/projects/typography-layout/) — с ними проще писать красиво и грамотно, со знаками вроде кавычек и тире.

Установка
=========

- Ткните выше на этой странице **Clone or Download** → **Download ZIP**
- Откройте **Finder**
- Нажмите `⇧⌘G`, введите в строку адреса: `~/Library/Keyboard Layouts/`, Enter
- В открывшуюся папку скопируйте то, что скачали в самом начале (три файла из архива, кроме README.md)
- Откройте **Системные настройки** → **Клавиатура** → **Источники ввода**
- Нажмите слева-снизу **+**. Выберите язык: **Другие**, раскладку: 
  - «Мефодица», если вам хочется классическую русскую раскладку (@fixme возможно, она PC-style).
  - «Мефодица(машинопись)», если вы хотите раскладку «Русскую машинопись»
  - «Мефодица(машинопись) + Коулмак», если вы хотите раскладку «Русскую машинопись» и английскую раскладку «Colemak».

Пол-дела готово. Хотите отключить значок клавиатуры и системный переключатель раскладок?

- Снова нажмите **+**, чтобы добавить раскладку. Добавьте **Японскую** раскладку. Она позволит удалить остальные.
- Вернитесь в список раскладок
- Удалите все раскладки, кроме «Мефодицы» и японской. 
- Удалите японскую раскладку
- Отключите **Показывать список клавиатур в строке меню**
- Сходите в **Сочетания клавиш** → **Источники ввода** и отключите переключение раскладки

Некоторые программы будут использовать старую раскладку. Перезайдите в систему (`⇧⌘G`), и станет хорошо.

Теперь по нажатию `Caps Lock` будет переключаться раскладка. Светодиод Caps Lock будет гореть, когда включен русский, и вы будете знать, что он включен, даже в полноэкранных приложениях.

Все раскладки содержат Бирмановские типографские знаки и поддерживают переключение по Caps Lock.

Маленькие хитрости
==================

Если положить раскладки в `/Library/Keyboard Layouts/`, они будут доступны всем пользователям.


Чтобы удалить раскладку по умолчанию и оставить только «Мефодицу»:
* Добавьте японскую раскладку.
* Удалите ангийскую и японскую раскладку.

[Более сложный способ](https://discussions.apple.com/thread/2705973?start=0&tstart=0):
- Сделать бэкап настроек.
- Установить редактор файлов *.plist (Xcode подойдёт).
- Убрать галочки со ВСЕХ раскладкок, кроме основной системной («U.S.») и нашей «Мефодицы Бирмана» в настройках тут: System Preferences > Languages & Text > Input sources
- Открыть файл ~/Library/Preferences/ByHost/com.apple.HIToolbox.<БЛА-БЛА-БЛА>.plist («БЛА-БЛА-БЛА» - это просто какая-то непонятная строка) с помощью редактора plist-файлов.
- В пункте "AppleEnabledInputSources" удалить первую запись. Она будет выглядеть вот так:

        <dict>
          <key>InputSourceKind</key>
          <string>Keyboard Layout</string>
          <key>KeyboardLayout ID</key>
          <integer>0</integer>
          <key>KeyboardLayout Name</key>
          <string>U.S.</string>
        </dict>
- Сохранить файл, перелогиниться (или перезагрузиться).

После удаления всех раскладок, значок переключения раскладок становится не нужен и его можно отключить.

Внимание: раскладки могут содержать ошибки. Если найдёте — дайте знать :)
